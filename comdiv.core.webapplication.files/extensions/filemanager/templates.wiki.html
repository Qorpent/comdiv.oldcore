<!--@@ 
/title:/
 -->


<h1>
	Поддержка генерации файлов по шаблону.</h1>
<h2>
	Общие сведения</h2>
<p>
	Файловая система приложений Z3 поддерживает систему шаблонов файлов. Шаблоны файлов позволяют в ручном или автоматическом режиме формировать файлы по указанному образцу с встраиваением в текст файла переданного словаря параметров.</p>
<p>
	Z3 поддерживает автоматическое формирование формы ввода для установки параметров шаблона для формируемого файла.</p>
<p>
	Данные о параметрах шаблона по умолчанию, их читаемом имени и формате хранятся в отдельном файле, равно как и информация о текущих параметрах целевого файла - это позволяет выполнять повторную генерацию и получать данные о настройках файла без необходимости его разбора.</p>
<h2>
	Терминология</h2>
<ul>
	<li>
		<strong>язык шаблонов </strong>- специальный язык разметки, используемый при создании шаблона, подробнее описан ниже</li>
	<li>
		<strong>файл шаблона</strong> - файл с именем в  формат<span style="font-weight:bold">е </span><strong>кодшаблона.template</strong>, написанный на <strong>языке шаблонов</strong>, где <strong>кодшаблона - </strong>уникальный код, состоящий из малых латинских букв, формируется автором шаблона</li>
	<li>
		<strong>файл описания шаблона - </strong>файл с именем <strong>кодшаблона.template.json, </strong>написанный в нотации JSON и совместимый с comdiv.modal.editobject в качестве настроек диалоговой форме, может присуствовать раздел __fields, формируется автором шаблона</li>
	<li>
		<strong>параметры шаблона по умолчанию - </strong>параметры, установленные в <strong>файле описания шаблона</strong></li>
	<li>
		<strong>параметры генерации файла - </strong>параметры, указанные при генерации файла на основе шаблона, складываются из <strong>параметры шаблона по умолчанию </strong>и установленных пользователем при вызове</li>
	<li>
		<strong>сгенерированный файл - </strong>любой файл, полученный путем формирвания из шаблона, остается обычным файлом, при желании может быть правлен вручную, при вызове генератора, генератор полностью заменяет содержимое файла</li>
	<li>
		<strong>файл описания сгенерированного файла - </strong>файл в нотации JSON, хранящий данные о том, с какими параметрами был сформирован <strong>сгенерированный файл, </strong>имя имеет вид <strong>имясгенерированногофайла.file.tg.json</strong>, формируется автоматически</li>
</ul>
<h2>
	Язык описания шаблонов</h2>
<p>
	Шаблон представляет из себя произвольный текстовой файл, в котором указаны места для вставки данных из параметров.</p>
<ol>
	<li>
		Поле для вывода значения параметра: <strong>[[THECODE]] - </strong>будет заменен значением параметра с кодом <strong>THECODE</strong></li>
	<li>
		Поле для вывода значения параметра с форматированием - [[<strong>THECODE:FORMAT]] - </strong><strong>FORMAT - </strong>представляет собой строку с возможными слотами {0} и {1}, которые будут заменяться значением параметра <strong>THECODE  </strong>и его кодом соответственно</li>
	<li>
		Поле для условного включения контента <strong><<THECODE:CONTENT>> - </strong>если <strong>THECODE==</strong>true,1 или непустой строке, то CONTENT включается в результирующий файл</li>
</ol>
<p>
	Условное поле может включать обычное и наоборот, но вложения условных в условные и обычных в обычные не поддерживаются из-за ограничений парсера.</p>
